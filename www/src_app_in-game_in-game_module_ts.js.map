{"version":3,"file":"src_app_in-game_in-game_module_ts.js","mappings":"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","sources":["./src/app/in-game/in-game-routing.module.ts","./src/app/in-game/in-game.module.ts","./src/app/in-game/in-game.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { InGamePage } from './in-game.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: InGamePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class InGamePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { InGamePageRoutingModule } from './in-game-routing.module';\n\nimport { InGamePage } from './in-game.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    InGamePageRoutingModule\n  ],\n  declarations: [InGamePage]\n})\nexport class InGamePageModule {}\n","import { Geolocation } from '@ionic-native/geolocation/ngx';\n\nimport { Component, OnInit } from '@angular/core';\nimport { UserServiceService } from '../service/user-service.service';\nimport { HttpClient, HttpHeaders} from '@angular/common/http';\nimport { WebSocketServer } from 'ws';\n\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { WSA_E_CANCELLED } from 'constants';\n\n\n@Component({\n  selector: 'app-in-game',\n  templateUrl: './in-game.page.html',\n  styleUrls: ['./in-game.page.scss'],\n})\n\n\nexport class InGamePage implements OnInit {\n\n  seflCode = 0;\n  otherDesc = \"\"\n  selfId: any;\n  otherId: any;\n\n  distance = 0\n\n  coords = new BehaviorSubject({\n    selfLat: 0.0,\n    selfLon: 0.0,\n    otherLat: 0.0,\n    otherLon: 0.0\n  });\n  staticCoords = {\n    selfLat: 0.0,\n    selfLon: 0.0,\n    otherLat: 0.0,\n    otherLon: 0.0\n  };\n\n  private socket;\n\n  constructor(public UserServiceService: UserServiceService, public geolocation: Geolocation, public http: HttpClient) { \n\n\n\n  }\n\n  ngOnInit() {\n\n    this.UserServiceService.userInfo.subscribe(data =>{\n      this.seflCode = data.userCode;\n      this.selfId = data.userId;\n\n    });\n    this.UserServiceService.otherUserInfo.subscribe(data =>{\n      this.otherDesc = data['desc'];\n      this.otherId = data.userId;\n    })\n    this.coords.subscribe(data =>{\n      this.distance = data.selfLat\n    })\n    console.log(this.UserServiceService.staticOtherInfo.desc);\n    \n    this.otherDesc = this.UserServiceService.staticOtherInfo.desc;\n\n    var tryUpdate = setInterval(() => {\n\n\n      this.updateSelfGeo();\n\n    }, 5000);\n\n\n\n    \n\n  }\n\n  public updateSelfGeo(){\n    this.geolocation.getCurrentPosition().then((resp) => {\n      var latitude = resp.coords.latitude;\n      var longitude = resp.coords.longitude;\n      var userId = this.selfId;\n      var otherId = this.otherId;\n\n\n      \n\n      \n      var iUrl = \"http://65.108.253.229:8000/update_info?user_id=\"+userId+\"&lat=\"+latitude+ \"&lon=\"+longitude;\n      this.http.post(iUrl, JSON.stringify({})).subscribe(data =>{\n        console.log(\"UPDATE GEo\");\n        var iUrl2 = \"http://65.108.253.229:8000/get_distance?user1_id=\"+userId+\"&user2_id=\"+otherId;\n        this.http.post(iUrl2, JSON.stringify({})).subscribe(data =>{\n          this.distance = data[\"dist\"];\n        })\n\n      })\n\n     }).catch((error) => {\n       console.log('Error getting location', error);\n     });\n  }\n\n\n\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}